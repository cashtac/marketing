name = "marketing-api"
compatibility_date = "2024-12-01"

# Pages will serve static files automatically.
# Workers functions go in /functions directory for Pages Functions.

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "marketing-db"
database_id = "" # Will be filled after `wrangler d1 create marketing-db`

# KV Namespace for rate limiting & OTP cache
[[kv_namespaces]]
binding = "AUTH_KV"
id = "" # Will be filled after `wrangler kv namespace create AUTH_KV`

# Environment variables (set via wrangler secret)
# JWT_SECRET        — 256-bit secret for signing JWTs
# ADMIN_PASSWORD    — bcrypt hash of admin password
# TOTP_ISSUER       — "CashTac Marketing"

[vars]
TOTP_ISSUER = "CashTac Marketing"
JWT_EXPIRY_MINUTES = "15"
REFRESH_EXPIRY_DAYS = "7"
RATE_LIMIT_MAX = "10"
RATE_LIMIT_WINDOW_SECONDS = "300"
