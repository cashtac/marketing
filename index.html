<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Internal Marketing System</title>
  <meta name="description" content="Internal Marketing System â€” Organize responsibilities, tasks, approvals, and marketing assets." />
  <link rel="stylesheet" href="css/design.css" />
  <link rel="stylesheet" href="css/admin-executive.css" />
  <link rel="stylesheet" href="css/ops-executive.css" />
</head>
<body>

  <!-- Header -->
  <header class="app-header" id="app-header">
    <div class="logo">
      <div class="logo-icon">M</div>
      <span id="header-title">Marketing Admin</span>
    </div>
    <div style="display:flex;align-items:center;gap:8px">
      <button id="role-badge" class="role-badge" type="button" onclick="App.openRoleSwitcher()">Admin</button>
    </div>
  </header>

  <!-- Content -->
  <main class="app-content" id="app-content"></main>

  <!-- Modal -->
  <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this) App.closeModal()">
    <div class="modal">
      <div class="modal-handle"></div>
      <h2 class="modal-title"></h2>
      <div class="modal-body"></div>
    </div>
  </div>

  <!-- More Drawer -->
  <div class="drawer-overlay" id="drawer-overlay" onclick="if(event.target===this) App.closeMoreDrawer()">
    <div class="drawer" id="more-drawer">
      <div class="drawer-handle"></div>
      <div class="drawer-body" id="drawer-body"></div>
    </div>
  </div>

  <!-- Role Switcher -->
  <div class="drawer-overlay" id="role-switcher-overlay" onclick="if(event.target===this) App.closeRoleSwitcher()">
    <div class="drawer" id="role-switcher">
      <div class="drawer-handle"></div>
      <h3 class="drawer-title">Switch Role</h3>
      <div class="drawer-body" id="role-switcher-body"></div>
    </div>
  </div>

  <!-- Admin Login Modal (hidden â€” no public route) -->
  <div id="admin-login-overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:9999;display:none;align-items:center;justify-content:center">
    <div style="background:var(--bg-card,#fff);border-radius:16px;padding:32px;max-width:360px;width:90%;box-shadow:0 24px 64px rgba(0,0,0,0.3)">
      <div style="text-align:center;margin-bottom:20px">
        <div style="font-size:2.5rem;margin-bottom:8px">ðŸ”’</div>
        <h2 style="font-size:1.2rem;font-weight:700;margin:0 0 4px">Admin Authentication</h2>
        <p style="font-size:0.75rem;color:var(--text-muted,#888);margin:0">Secure access â€” 2FA required</p>
      </div>
      <div id="admin-login-step1">
        <input class="form-input" id="admin-email" type="email" placeholder="Email" style="margin-bottom:8px;width:100%;box-sizing:border-box" />
        <input class="form-input" id="admin-password" type="password" placeholder="Password" style="margin-bottom:12px;width:100%;box-sizing:border-box" />
        <button class="btn btn-primary" id="admin-login-btn" onclick="App.adminLogin()" style="width:100%">Sign In</button>
      </div>
      <div id="admin-login-step2" style="display:none">
        <p style="font-size:0.8rem;color:var(--text-muted);margin:0 0 12px;text-align:center">Enter the 6-digit code from your authenticator app</p>
        <input class="form-input" id="admin-2fa-code" type="text" inputmode="numeric" maxlength="6" placeholder="000000" style="text-align:center;font-size:1.5rem;letter-spacing:0.5em;margin-bottom:12px;width:100%;box-sizing:border-box" />
        <button class="btn btn-primary" id="admin-2fa-btn" onclick="App.adminVerify2FA()" style="width:100%">Verify</button>
      </div>
      <div id="admin-login-error" style="display:none;margin-top:10px;padding:8px 12px;background:#fee;border-radius:8px;color:#c0392b;font-size:0.78rem;text-align:center"></div>
      <button onclick="document.getElementById('admin-login-overlay').style.display='none'" style="margin-top:12px;background:none;border:none;color:var(--text-muted);cursor:pointer;font-size:0.75rem;width:100%;text-align:center">Cancel</button>
    </div>
  </div>

  <!-- Bottom Navigation â€” 4 Primary Tabs -->
  <nav class="bottom-nav" id="bottom-nav">
    <button class="nav-item active" data-page="dashboard" onclick="App.navigate('dashboard')">
      <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      <span>Home</span>
    </button>
    <button class="nav-item" data-page="tasks" onclick="App.navigate('tasks')">
      <svg viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
      <span>Tasks</span>
    </button>
    <button class="nav-item" data-page="locations" onclick="App.navigate('locations')">
      <svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
      <span>Locations</span>
    </button>
    <button class="nav-item" data-page="more" onclick="App.openMoreDrawer()">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="5" r="1.5" fill="currentColor" stroke="none"/><circle cx="12" cy="12" r="1.5" fill="currentColor" stroke="none"/><circle cx="12" cy="19" r="1.5" fill="currentColor" stroke="none"/></svg>
      <span>More</span>
    </button>
  </nav>

  <!-- Scripts -->
  <script src="js/auth.js?v=12"></script>
  <script src="js/store.js?v=12"></script>
  <script src="js/pages/dashboard.js?v=12"></script>
  <script src="js/pages/tasks.js?v=12"></script>
  <script src="js/pages/approvals.js?v=12"></script>
  <script src="js/pages/assets.js?v=12"></script>
  <script src="js/pages/content.js?v=12"></script>
  <script src="js/pages/locations.js?v=12"></script>
  <script src="js/pages/team.js?v=12"></script>
  <script src="js/pages/settings.js?v=12"></script>
  <script src="js/pages/taskview.js?v=12"></script>
  <script src="js/pages/campaigns.js?v=12"></script>
  <script src="js/pages/controller.js?v=12"></script>
  <script src="js/pages/feedback.js?v=12"></script>
  <script src="js/pages/notifications.js?v=12"></script>
  <script src="js/pages/admin.js?v=12"></script>
  <script src="js/pages/ideas.js?v=12"></script>
  <script src="js/pages/command.js?v=12"></script>
  <script src="js/pages/org-preview.js?v=12"></script>
  <script src="js/calendar-export.js?v=12"></script>
  <script src="js/pages/threads.js?v=12"></script>
  <script src="js/app.js?v=12"></script>
  <script>
    /* Secret admin login shortcut: Ctrl+Shift+A */
    document.addEventListener('keydown', e => {
      if (e.ctrlKey && e.shiftKey && e.key === 'A') {
        e.preventDefault();
        const overlay = document.getElementById('admin-login-overlay');
        if (overlay) overlay.style.display = 'flex';
      }
    });
    /* Boot app */
    document.addEventListener('DOMContentLoaded', () => App.init());
  </script>
</body>
</html>
